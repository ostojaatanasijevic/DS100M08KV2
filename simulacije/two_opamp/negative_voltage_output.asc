Version 4
SHEET 1 7348 2628
WIRE 704 -176 624 -176
WIRE 944 -176 784 -176
WIRE 1584 -176 1504 -176
WIRE 1824 -176 1664 -176
WIRE 3424 -112 3152 -112
WIRE 4240 -112 3424 -112
WIRE 4464 -112 4336 -112
WIRE 4560 -112 4464 -112
WIRE 624 -48 624 -176
WIRE 640 -48 624 -48
WIRE 1504 -48 1504 -176
WIRE 1520 -48 1504 -48
WIRE 800 -32 704 -32
WIRE 944 -32 944 -176
WIRE 944 -32 864 -32
WIRE 1680 -32 1584 -32
WIRE 1824 -32 1824 -176
WIRE 1824 -32 1744 -32
WIRE 640 -16 480 -16
WIRE 1520 -16 1360 -16
WIRE 1104 16 1104 -64
WIRE 480 32 480 -16
WIRE 1360 32 1360 -16
WIRE 1824 48 1824 -32
WIRE 3424 48 3424 -112
WIRE 3488 48 3424 48
WIRE 3728 48 3568 48
WIRE 3776 48 3728 48
WIRE 3888 48 3776 48
WIRE 4144 48 3888 48
WIRE 4288 48 4288 -48
WIRE 4288 48 4144 48
WIRE 944 112 944 -32
WIRE 3888 112 3888 48
WIRE 480 144 480 112
WIRE 1360 144 1360 112
WIRE 3728 144 3728 48
WIRE 3776 144 3776 48
WIRE 1104 160 1104 96
WIRE 1104 160 1008 160
WIRE 1104 192 1104 160
WIRE 4144 208 4144 48
WIRE 1824 224 1824 128
WIRE 1888 224 1824 224
WIRE 1984 224 1984 208
WIRE 1984 224 1888 224
WIRE 2112 224 1984 224
WIRE 4288 224 4288 48
WIRE 944 256 944 208
WIRE 3392 256 3280 256
WIRE 3408 256 3392 256
WIRE 3728 256 3728 224
WIRE 3776 256 3776 224
WIRE 3776 256 3728 256
WIRE 3888 256 3888 192
WIRE 3888 256 3776 256
WIRE 4080 256 3888 256
WIRE 1104 288 1104 256
WIRE 3728 320 3728 256
WIRE 3280 336 3280 256
WIRE 944 368 944 336
WIRE 1008 368 944 368
WIRE 1104 368 1104 352
WIRE 1104 368 1008 368
WIRE 1232 368 1104 368
WIRE 3728 432 3728 400
WIRE 4144 432 4144 304
WIRE 4288 432 4288 288
WIRE 4560 432 4560 -112
WIRE 704 464 624 464
WIRE 944 464 784 464
WIRE 3280 496 3280 416
WIRE 3728 512 3728 480
WIRE 624 592 624 464
WIRE 640 592 624 592
WIRE 800 608 704 608
WIRE 944 608 944 464
WIRE 944 608 864 608
WIRE 4144 608 4144 480
WIRE 4288 608 4288 432
WIRE 640 624 480 624
WIRE 1104 656 1104 576
WIRE 3728 656 3728 592
WIRE 3776 656 3728 656
WIRE 3888 656 3776 656
WIRE 4080 656 3888 656
WIRE 480 672 480 624
WIRE 3280 688 3280 576
WIRE 3376 688 3280 688
WIRE 3424 688 3376 688
WIRE 3728 720 3728 656
WIRE 3888 720 3888 656
WIRE 3776 736 3776 656
WIRE 944 752 944 608
WIRE 480 784 480 752
WIRE 1104 800 1104 736
WIRE 1104 800 1008 800
WIRE 1232 800 1104 800
WIRE 1104 832 1104 800
WIRE 3488 848 3424 848
WIRE 3728 848 3728 800
WIRE 3728 848 3568 848
WIRE 3776 848 3776 816
WIRE 3776 848 3728 848
WIRE 3888 848 3888 800
WIRE 3888 848 3776 848
WIRE 4144 848 4144 704
WIRE 4144 848 3888 848
WIRE 4288 848 4288 672
WIRE 4288 848 4144 848
WIRE 1232 880 1232 800
WIRE 944 896 944 848
WIRE 4288 896 4288 848
WIRE 1104 928 1104 896
WIRE 3264 960 3152 960
WIRE 3424 960 3424 848
WIRE 3424 960 3344 960
WIRE 4240 960 3424 960
WIRE 4448 960 4336 960
WIRE 4560 960 4560 512
WIRE 4560 960 4448 960
WIRE 944 1008 944 976
WIRE 1104 1008 1104 992
WIRE 1104 1008 944 1008
WIRE 1232 1008 1232 944
WIRE 1232 1008 1104 1008
WIRE 944 1056 944 1008
WIRE 944 1168 944 1136
FLAG -80 -176 0
FLAG -80 -256 2.5V
FLAG 96 -176 0
FLAG 96 -256 -2.5V
FLAG -80 16 0
FLAG -80 -64 9V
FLAG 96 16 0
FLAG 96 -64 -9V
FLAG -80 192 0
FLAG -80 112 5V
FLAG 96 192 0
FLAG 96 112 -5V
FLAG 672 -64 5V
FLAG 672 0 0
FLAG 1008 368 -5V
FLAG 480 144 0
FLAG 1104 -64 5V
FLAG 1552 -64 5V
FLAG 1552 0 0
FLAG 1888 224 -5V
FLAG 1360 144 0
FLAG 480 784 0
FLAG 1104 576 5V
FLAG 672 576 2.5V
FLAG 672 640 -2.5V
FLAG 944 1168 0
FLAG 4464 -112 vout+
FLAG 4448 960 vout-
FLAG 3152 -112 pos
FLAG 3152 960 neg
FLAG 4288 432 0
FLAG 4144 432 0
FLAG 3728 432 0
FLAG 3392 256 pos
FLAG 3376 688 neg
FLAG 3728 480 0
FLAG 4144 480 0
SYMBOL voltage -80 -272 R0
SYMATTR InstName V1
SYMATTR Value 2.75
SYMBOL voltage 96 -272 R0
SYMATTR InstName V2
SYMATTR Value -2.75
SYMBOL voltage -80 -80 R0
SYMATTR InstName V4
SYMATTR Value 9
SYMBOL voltage 96 -80 R0
SYMATTR InstName V6
SYMATTR Value -9
SYMBOL voltage -80 96 R0
SYMATTR InstName V7
SYMATTR Value {five}
SYMBOL voltage 96 208 R180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value {five}
SYMBOL res 800 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R58
SYMATTR Value 500
SYMBOL OpAmps\\opamp2 672 -96 R0
SYMATTR InstName U1
SYMATTR Value TLV354
SYMBOL diode 800 -16 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL voltage 480 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(2 2.5 1k)
SYMBOL npn 1008 112 M0
SYMATTR InstName Q1
SYMATTR Value 2N5551
SYMBOL res 1088 0 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 928 240 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL diode 1088 192 R0
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode 1088 288 R0
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL res 1680 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 500
SYMBOL OpAmps\\opamp2 1552 -96 R0
SYMATTR InstName U2
SYMATTR Value TLV354
SYMBOL diode 1680 -16 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL voltage 1360 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value SINE(2 2.5 1k)
SYMBOL res 1808 32 R0
SYMATTR InstName R5
SYMATTR Value 25k
SYMBOL res 800 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 500
SYMBOL OpAmps\\opamp2 672 544 R0
SYMATTR InstName U3
SYMATTR Value TLV354
SYMBOL diode 800 624 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL voltage 480 656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value SINE(-0.25 0.5 10Meg)
SYMBOL npn 1008 752 M0
SYMATTR InstName Q2
SYMATTR Value 2N5551
SYMBOL res 1088 640 R0
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL res 928 880 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL diode 1088 832 R0
SYMATTR InstName D6
SYMATTR Value 1N4148
SYMBOL diode 1088 928 R0
SYMATTR InstName D7
SYMATTR Value 1N4148
SYMBOL voltage 944 1040 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V10
SYMATTR Value -3.3
SYMBOL voltage 3280 320 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V11
SYMATTR Value PULSE({Vbat - ripple } {Vbat + ripple } 0 0 0 20u 40u)
SYMBOL npn 4240 -48 R270
SYMATTR InstName Q3
SYMATTR Value 2N5551
SYMBOL res 3584 832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL pnp 4240 896 M90
SYMATTR InstName Q4
SYMATTR Value 2N5401
SYMBOL cap 4272 608 R0
SYMATTR InstName C1
SYMATTR Value 47µ
SYMBOL res 3584 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res 3360 944 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1m
SYMBOL cap 4272 224 R0
SYMATTR InstName C2
SYMATTR Value 47µ
SYMBOL npn 4080 208 R0
SYMATTR InstName Q5
SYMATTR Value 2N5551
SYMBOL res 3744 240 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value 100k
SYMBOL res 3744 416 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R12
SYMATTR Value 22k
SYMBOL pnp 4080 704 M180
SYMATTR InstName Q6
SYMATTR Value 2N5401
SYMBOL res 3744 704 M0
SYMATTR InstName R13
SYMATTR Value 100k
SYMBOL res 3744 496 M0
SYMATTR InstName R14
SYMATTR Value 22k
SYMBOL current 4560 432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value 7m
SYMBOL res 3760 128 R0
SYMATTR InstName R15
SYMATTR Value 470k
SYMBOL res 3872 704 R0
SYMATTR InstName R16
SYMATTR Value 1Meg
SYMBOL res 3872 96 R0
SYMATTR InstName R17
SYMATTR Value 1Meg
SYMBOL res 3760 720 R0
SYMATTR InstName R18
SYMATTR Value 470k
SYMBOL voltage 3280 480 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V12
SYMATTR Value PULSE({Vbat - ripple } {Vbat + ripple } 0 0 0 20u 40u)
SYMBOL cap 1216 880 R0
SYMATTR InstName C3
SYMATTR Value 10µ
TEXT -240 312 Left 2 !;tran 1m
TEXT -24 264 Left 2 !.param five=5
TEXT -272 472 Left 2 !.param par_cap = 1p
TEXT 256 -104 Left 2 !.lib TLV354.LIB
TEXT 3320 -176 Left 2 !.tran 10m
TEXT 2536 288 Left 2 !.step param Vbat list 3.2 3.5 3.6 3.9 4.2
TEXT 2552 216 Left 2 !.param ripple = 100m
