Version 4
SHEET 1 3776 1588
WIRE 2048 -272 1808 -272
WIRE 400 -256 240 -256
WIRE 640 -256 464 -256
WIRE 880 -256 704 -256
WIRE 1024 -256 944 -256
WIRE 1248 -256 1088 -256
WIRE 1808 -160 1808 -272
WIRE 1872 -160 1808 -160
WIRE 2048 -144 2048 -272
WIRE 2048 -144 1936 -144
WIRE 2240 -144 2048 -144
WIRE 2384 -144 2240 -144
WIRE 240 -128 240 -256
WIRE 400 -128 240 -128
WIRE 560 -128 480 -128
WIRE 624 -128 560 -128
WIRE 864 -128 704 -128
WIRE 1088 -128 944 -128
WIRE 1248 -128 1248 -256
WIRE 1248 -128 1168 -128
WIRE 1376 -128 1248 -128
WIRE 1488 -128 1376 -128
WIRE 1584 -128 1488 -128
WIRE 1744 -128 1584 -128
WIRE 1872 -128 1744 -128
WIRE 560 -112 560 -128
WIRE 2048 -112 2048 -144
WIRE 1248 -64 1248 -128
WIRE 2384 -16 2384 -144
WIRE 2048 0 2048 -48
WIRE 1376 16 1376 -128
WIRE 1488 16 1488 -128
WIRE 1584 16 1584 -128
WIRE 1744 16 1744 -128
WIRE 1248 96 1248 16
WIRE 240 144 240 -128
WIRE 624 144 240 144
WIRE 624 240 624 144
WIRE 1744 240 1744 80
WIRE 2128 240 2016 240
WIRE 2384 240 2384 64
WIRE 2384 240 2208 240
WIRE 2672 240 2384 240
WIRE 3152 256 2736 256
WIRE 240 272 240 144
WIRE 1376 272 1376 80
WIRE 1488 272 1488 80
WIRE 1584 272 1584 80
WIRE 2384 272 2384 240
WIRE 2672 272 2560 272
WIRE 1248 288 1248 176
WIRE 1248 288 1200 288
WIRE 2384 352 2384 336
WIRE 1248 368 1248 288
WIRE 2560 400 2560 272
WIRE 2560 400 2384 400
WIRE 2880 400 2560 400
WIRE 3152 400 3152 256
WIRE 3152 400 2960 400
WIRE 624 416 624 320
WIRE 2560 432 2560 400
WIRE 3152 432 3152 400
WIRE 1376 512 1376 272
WIRE 1488 512 1488 272
WIRE 1584 512 1584 272
WIRE 1744 512 1744 240
WIRE 2560 544 2560 496
WIRE 3152 544 3152 496
WIRE 1248 560 1248 448
WIRE 2064 560 1824 560
WIRE 2384 560 2384 400
WIRE 1824 688 1824 560
WIRE 1840 688 1824 688
WIRE 2064 704 2064 560
WIRE 2064 704 1904 704
WIRE 2336 704 2064 704
WIRE 2384 704 2384 640
WIRE 2384 704 2336 704
WIRE 240 720 240 352
WIRE 352 720 240 720
WIRE 400 720 352 720
WIRE 624 720 432 720
WIRE 864 720 704 720
WIRE 1088 720 944 720
WIRE 1248 720 1248 640
WIRE 1248 720 1168 720
WIRE 1376 720 1376 576
WIRE 1376 720 1248 720
WIRE 1488 720 1488 576
WIRE 1488 720 1376 720
WIRE 1584 720 1584 576
WIRE 1584 720 1488 720
WIRE 1744 720 1744 576
WIRE 1744 720 1584 720
WIRE 1840 720 1744 720
WIRE 2064 736 2064 704
WIRE 2064 848 2064 800
WIRE 240 864 240 720
WIRE 400 864 240 864
WIRE 640 864 464 864
WIRE 880 864 704 864
WIRE 1088 864 944 864
WIRE 1248 864 1248 720
WIRE 1248 864 1152 864
WIRE 2320 1088 2320 1040
FLAG -80 -176 0
FLAG -80 -256 2.5V
FLAG 96 -176 0
FLAG 96 -256 -2.5V
FLAG 1200 288 0
FLAG 1584 272 0
FLAG 1744 240 0
FLAG 1904 -176 5V
FLAG 1904 -112 -5V
FLAG 624 416 0
FLAG 1488 272 0
FLAG -80 16 0
FLAG -80 -64 9V
FLAG 96 16 0
FLAG 96 -64 -9V
FLAG 2016 240 0
FLAG -352 464 0
FLAG -352 384 5V
FLAG 96 192 0
FLAG 1872 672 5V
FLAG 1872 736 -5V
FLAG 2704 288 5V
FLAG 2704 224 -5V
FLAG 96 112 -5V
FLAG 2240 -144 diff+
FLAG 2336 704 diff-
FLAG 2320 1168 0
FLAG 2320 960 0
FLAG 2384 352 0
FLAG 2560 544 0
FLAG 3152 544 0
FLAG 1376 272 0
FLAG 2064 848 0
FLAG 2048 0 0
SYMBOL voltage -80 -272 R0
SYMATTR InstName V1
SYMATTR Value 2.75
SYMBOL voltage 96 -272 R0
SYMATTR InstName V2
SYMATTR Value -2.75
SYMBOL voltage 240 256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(0 20 50Meg)
SYMBOL res 496 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {1Meg * (100 +res_tol)/100}
SYMBOL res 1232 656 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL cap 464 -272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 10p
SYMBOL cap 704 -272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 10p
SYMBOL cap 944 -272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 10p
SYMBOL cap 1088 -272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 10p
SYMBOL cap 464 848 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 10p
SYMBOL cap 704 848 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value 10p
SYMBOL cap 944 848 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value 10p
SYMBOL cap 1152 848 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 10p
SYMBOL cap 1568 16 R0
SYMATTR InstName C13
SYMATTR Value 120p
SYMBOL cap 1600 576 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C14
SYMATTR Value 120p
SYMBOL cap 1728 16 R0
SYMATTR InstName C15
SYMATTR Value 47p
SYMBOL cap 1760 576 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C16
SYMATTR Value 47p
SYMBOL res 1232 32 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 2368 656 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R13
SYMATTR Value {5 * gain * (100 + tolerance) / 100}
SYMBOL res 2112 224 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value {1000 * (100 - tolerance)/100}
SYMBOL voltage 624 224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value SINE(400 100 10Meg)
SYMBOL cap 1472 16 R0
SYMATTR InstName C7
SYMATTR Value 470p
SYMBOL cap 1504 576 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C8
SYMATTR Value 470p
SYMBOL voltage -80 -80 R0
SYMATTR InstName V4
SYMATTR Value 9
SYMBOL voltage 96 -80 R0
SYMATTR InstName V6
SYMATTR Value -9
SYMBOL voltage -352 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value PULSE({5 - 100m} {5 + 100m} 0 0 0 5u 10u)
SYMBOL OpAmps\\AD8038 1904 -208 R0
SYMATTR InstName U3
SYMBOL OpAmps\\AD8038 1872 640 R0
SYMATTR InstName U2
SYMBOL ZZZ\\OpAmp\\AD8009an 2704 256 M180
SYMATTR InstName U4
SYMBOL bv 2320 1072 R0
SYMATTR InstName B1
SYMATTR Value V=20*(V(diff+) - V(diff-))
SYMBOL res 2304 944 R0
SYMATTR InstName R17
SYMATTR Value 100k
SYMBOL cap 2368 272 R0
SYMATTR InstName C18
SYMATTR Value {par_cap}
SYMBOL res 1232 80 R0
SYMATTR InstName R11
SYMATTR Value 25
SYMBOL res 1232 352 R0
SYMATTR InstName R12
SYMATTR Value 25
SYMBOL cap 1360 16 R0
SYMATTR InstName C2
SYMATTR Value 360p
SYMBOL cap 1392 576 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C21
SYMATTR Value 360p
SYMBOL res 2864 384 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value {1000 * (100 - tolerance)/100}
SYMBOL res 2368 80 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R18
SYMATTR Value {5 * gain * (100 + tolerance) / 100}
SYMBOL cap 3136 432 R0
SYMATTR InstName C17
SYMATTR Value {par_cap}
SYMBOL cap 2544 432 R0
SYMATTR InstName C1
SYMATTR Value {par_cap}
SYMBOL cap 2048 736 R0
SYMATTR InstName C19
SYMATTR Value {par_cap}
SYMBOL cap 2032 -112 R0
SYMATTR InstName C20
SYMATTR Value {par_cap}
SYMBOL res 720 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {1Meg * (100 +res_tol)/100}
SYMBOL res 960 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {1Meg * (100 +res_tol)/100}
SYMBOL res 1184 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {1Meg * (100 +res_tol)/100}
SYMBOL res 448 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value {1Meg * (100 +res_tol)/100}
SYMBOL res 720 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value {1Meg * (100 +res_tol)/100}
SYMBOL res 960 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value {1Meg * (100 +res_tol)/100}
SYMBOL res 1184 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value {1Meg * (100 +res_tol)/100}
SYMBOL voltage 96 208 R180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value PULSE({5 - 100m} {5 + 100m} 2u 0 0 5u 10u)
TEXT -240 312 Left 2 !.tran 0 10m 0 1n
TEXT 1040 -40 Left 2 ;1 / 400
TEXT -24 264 Left 2 !.param five=5
TEXT 1320 -296 Left 2 ;82.5 dB CMRR at 100 kHz
TEXT 2992 744 Left 2 !.param tolerance=-1
TEXT 3000 784 Left 2 !.param par_cap=10p
TEXT 2288 800 Left 2 !.param res_tol=-0.1
TEXT 2856 688 Left 2 !.param gain=10
