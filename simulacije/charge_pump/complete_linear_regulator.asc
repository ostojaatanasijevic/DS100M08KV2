Version 4
SHEET 1 11460 3748
WIRE 3200 112 2928 112
WIRE 4016 112 3200 112
WIRE 4240 112 4112 112
WIRE 4336 112 4240 112
WIRE 3200 272 3200 112
WIRE 3264 272 3200 272
WIRE 3504 272 3344 272
WIRE 3552 272 3504 272
WIRE 3664 272 3552 272
WIRE 3920 272 3664 272
WIRE 4064 272 4064 176
WIRE 4064 272 3920 272
WIRE 3664 336 3664 272
WIRE 3504 368 3504 272
WIRE 3552 368 3552 272
WIRE 3920 432 3920 272
WIRE 4064 448 4064 272
WIRE 3168 480 3056 480
WIRE 3184 480 3168 480
WIRE 3504 480 3504 448
WIRE 3552 480 3552 448
WIRE 3552 480 3504 480
WIRE 3664 480 3664 416
WIRE 3664 480 3552 480
WIRE 3856 480 3664 480
WIRE 3504 544 3504 480
WIRE 3056 560 3056 480
WIRE 3504 656 3504 624
WIRE 3920 656 3920 528
WIRE 4064 656 4064 512
WIRE 4336 656 4336 112
WIRE 3056 720 3056 640
WIRE 3504 736 3504 704
WIRE 3920 832 3920 704
WIRE 4064 832 4064 656
WIRE 3504 880 3504 816
WIRE 3552 880 3504 880
WIRE 3664 880 3552 880
WIRE 3856 880 3664 880
WIRE 3056 912 3056 800
WIRE 3152 912 3056 912
WIRE 3200 912 3152 912
WIRE 3504 944 3504 880
WIRE 3664 944 3664 880
WIRE 3552 960 3552 880
WIRE 3264 1072 3200 1072
WIRE 3504 1072 3504 1024
WIRE 3504 1072 3344 1072
WIRE 3552 1072 3552 1040
WIRE 3552 1072 3504 1072
WIRE 3664 1072 3664 1024
WIRE 3664 1072 3552 1072
WIRE 3920 1072 3920 928
WIRE 3920 1072 3664 1072
WIRE 4064 1072 4064 896
WIRE 4064 1072 3920 1072
WIRE 4064 1120 4064 1072
WIRE 3040 1184 2928 1184
WIRE 3200 1184 3200 1072
WIRE 3200 1184 3120 1184
WIRE 4016 1184 3200 1184
WIRE 4224 1184 4112 1184
WIRE 4336 1184 4336 736
WIRE 4336 1184 4224 1184
FLAG 4240 112 vout+
FLAG 4224 1184 vout-
FLAG 2928 112 pos
FLAG 2928 1184 neg
FLAG 4064 656 0
FLAG 3920 656 0
FLAG 3504 656 0
FLAG 3168 480 pos
FLAG 3152 912 neg
FLAG 3504 704 0
FLAG 3920 704 0
SYMBOL voltage 3056 544 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE({Vbat - ripple } {Vbat + ripple } 0 0 0 20u 40u)
SYMBOL npn 4016 176 R270
SYMATTR InstName Q1
SYMATTR Value 2N5551
SYMBOL res 3360 1056 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL pnp 4016 1120 M90
SYMATTR InstName Q2
SYMATTR Value 2N5401
SYMBOL cap 4048 832 R0
SYMATTR InstName C3
SYMATTR Value 47µ
SYMBOL res 3360 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 3136 1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1m
SYMBOL cap 4048 448 R0
SYMATTR InstName C4
SYMATTR Value 47µ
SYMBOL npn 3856 432 R0
SYMATTR InstName Q3
SYMATTR Value 2N5551
SYMBOL res 3520 464 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R12
SYMATTR Value 100k
SYMBOL res 3520 640 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R13
SYMATTR Value 22k
SYMBOL pnp 3856 928 M180
SYMATTR InstName Q4
SYMATTR Value 2N5401
SYMBOL res 3520 928 M0
SYMATTR InstName R11
SYMATTR Value 100k
SYMBOL res 3520 720 M0
SYMATTR InstName R14
SYMATTR Value 22k
SYMBOL current 4336 656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value 7m
SYMBOL res 3536 352 R0
SYMATTR InstName R1
SYMATTR Value 470k
SYMBOL res 3648 928 R0
SYMATTR InstName R3
SYMATTR Value 1Meg
SYMBOL res 3648 320 R0
SYMATTR InstName R5
SYMATTR Value 1Meg
SYMBOL res 3536 944 R0
SYMATTR InstName R6
SYMATTR Value 470k
SYMBOL voltage 3056 704 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE({Vbat - ripple } {Vbat + ripple } 0 0 0 20u 40u)
TEXT 3096 48 Left 2 !.tran 10m
TEXT 2280 552 Left 2 !.step param Vbat list 3.2 3.5 3.6 3.9 4.2
TEXT 2296 480 Left 2 !.param ripple = 100m
