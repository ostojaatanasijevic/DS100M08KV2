Version 4
SHEET 1 11460 3748
WIRE -1680 752 -1712 752
WIRE -1648 752 -1680 752
WIRE -1536 752 -1600 752
WIRE -1712 800 -1712 752
WIRE -1600 800 -1600 752
WIRE -1712 944 -1712 880
WIRE -1600 944 -1600 880
WIRE -1680 1024 -1712 1024
WIRE -1648 1024 -1680 1024
WIRE -1712 1072 -1712 1024
WIRE 896 1088 880 1088
WIRE 1056 1088 896 1088
WIRE 1392 1088 1120 1088
WIRE -16 1136 -16 1104
WIRE -16 1200 -16 1136
WIRE -1712 1216 -1712 1152
WIRE 960 1248 880 1248
WIRE 1024 1248 960 1248
WIRE 1216 1248 1136 1248
WIRE 1280 1248 1216 1248
WIRE 1392 1248 1392 1088
WIRE 1392 1248 1344 1248
WIRE 1488 1248 1392 1248
WIRE 1632 1248 1552 1248
WIRE 1712 1248 1632 1248
WIRE 2672 1248 2592 1248
WIRE 2736 1248 2672 1248
WIRE 2928 1248 2848 1248
WIRE 2992 1248 2928 1248
WIRE 3104 1248 3056 1248
WIRE 3200 1248 3104 1248
WIRE 3344 1248 3264 1248
WIRE 3424 1248 3344 1248
WIRE 1632 1296 1632 1248
WIRE 1712 1296 1712 1248
WIRE 3104 1296 3104 1248
WIRE 3344 1296 3344 1248
WIRE 3424 1296 3424 1248
WIRE -16 1328 -16 1280
WIRE 880 1344 880 1248
WIRE 2592 1344 2592 1248
WIRE 1632 1408 1632 1360
WIRE 1712 1408 1712 1376
WIRE 3104 1408 3104 1360
WIRE 3344 1408 3344 1360
WIRE 3424 1408 3424 1376
WIRE 960 1440 960 1248
WIRE 1024 1440 960 1440
WIRE 1216 1440 1216 1248
WIRE 1216 1440 1136 1440
WIRE 2672 1440 2672 1248
WIRE 2736 1440 2672 1440
WIRE 2928 1440 2928 1248
WIRE 2928 1440 2848 1440
WIRE 880 1472 880 1424
WIRE 2592 1472 2592 1424
WIRE 960 1648 960 1440
WIRE 1024 1648 960 1648
WIRE 1216 1648 1216 1440
WIRE 1216 1648 1136 1648
WIRE 2672 1648 2672 1440
WIRE 2736 1648 2672 1648
WIRE 2928 1648 2928 1440
WIRE 2928 1648 2848 1648
WIRE 960 1840 960 1648
WIRE 1024 1840 960 1840
WIRE 1216 1840 1216 1648
WIRE 1216 1840 1136 1840
WIRE 2672 1840 2672 1648
WIRE 2736 1840 2672 1840
WIRE 2928 1840 2928 1648
WIRE 2928 1840 2848 1840
WIRE 960 2048 960 1840
WIRE 1024 2048 960 2048
WIRE 1216 2048 1216 1840
WIRE 1216 2048 1136 2048
WIRE 2672 2048 2672 1840
WIRE 2736 2048 2672 2048
WIRE 2928 2048 2928 1840
WIRE 2928 2048 2848 2048
WIRE 960 2240 960 2048
WIRE 1024 2240 960 2240
WIRE 1216 2240 1216 2048
WIRE 1216 2240 1136 2240
WIRE 2672 2240 2672 2048
WIRE 2736 2240 2672 2240
WIRE 2928 2240 2928 2048
WIRE 2928 2240 2848 2240
FLAG -1600 944 0
FLAG -1680 752 input
FLAG -1536 752 source
FLAG -1712 944 0
FLAG -1680 1024 init
FLAG -1712 1216 0
FLAG 880 1472 0
FLAG 1024 1312 0
FLAG 1024 1216 5V
FLAG 1024 1280 5V
FLAG 1632 1408 0
FLAG -16 1328 0
FLAG -16 1136 5V
FLAG 1712 1408 0
FLAG 1024 1504 0
FLAG 1024 1408 5V
FLAG 1024 1472 5V
FLAG 896 1088 5V
FLAG 1024 1712 0
FLAG 1024 1616 5V
FLAG 1024 1680 5V
FLAG 1024 1904 0
FLAG 1024 1808 5V
FLAG 1024 1872 5V
FLAG 1024 2112 0
FLAG 1024 2016 5V
FLAG 1024 2080 5V
FLAG 1024 2304 0
FLAG 1024 2208 5V
FLAG 1024 2272 5V
FLAG 2592 1472 0
FLAG 2736 1312 0
FLAG 2736 1216 5V
FLAG 2736 1280 5V
FLAG 3344 1408 0
FLAG 3424 1408 0
FLAG 2736 1504 0
FLAG 2736 1408 5V
FLAG 2736 1472 5V
FLAG 2736 1712 0
FLAG 2736 1616 5V
FLAG 2736 1680 5V
FLAG 2736 1904 0
FLAG 2736 1808 5V
FLAG 2736 1872 5V
FLAG 2736 2112 0
FLAG 2736 2016 5V
FLAG 2736 2080 5V
FLAG 2736 2304 0
FLAG 2736 2208 5V
FLAG 2736 2272 5V
FLAG 3104 1408 0
SYMBOL voltage -1600 784 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 72 52 Right 2
WINDOW 3 69 103 Right 2
SYMATTR InstName V7
SYMATTR Value 310
SYMBOL voltage -1712 784 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value PULSE(0 5 10u 10n 10n 1m 10m)
SYMBOL voltage -1712 1056 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 12 10u 10n 10n 30u 10m 1)
SYMBOL voltage 880 1328 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 5 {1 / fsw / 2} 10n 10n {d / fsw} {1 / fsw})
SYMBOL schottky 1056 1104 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value RB160MM-60
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 1488 1264 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value RB160MM-60
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 1344 1232 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value {Cf}
SYMBOL voltage -16 1184 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 4
SYMBOL SN74LVC1G08 1072 1248 R0
SYMATTR InstName U1
SYMBOL res 1696 1280 R0
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL SN74LVC1G08 1072 1440 R0
SYMATTR InstName U2
SYMBOL SN74LVC1G08 1072 1648 R0
SYMATTR InstName U3
SYMBOL SN74LVC1G08 1072 1840 R0
SYMATTR InstName U4
SYMBOL SN74LVC1G08 1072 2048 R0
SYMATTR InstName U5
SYMBOL SN74LVC1G08 1072 2240 R0
SYMATTR InstName U6
SYMBOL cap 1648 1360 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C1
SYMATTR Value {Cf}
SYMBOL voltage 2592 1328 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 5 {1 / fsw / 2} 10n 10n {d / fsw} {1 / fsw})
SYMBOL schottky 3088 1296 R0
SYMATTR InstName D1
SYMATTR Value RB160MM-60
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 3264 1232 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value RB160MM-60
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 3056 1232 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value {Cf}
SYMBOL SN74LVC1G08 2784 1248 R0
SYMATTR InstName U7
SYMBOL SN74LVC1G08 2784 1440 R0
SYMATTR InstName U8
SYMBOL SN74LVC1G08 2784 1648 R0
SYMATTR InstName U9
SYMBOL SN74LVC1G08 2784 1840 R0
SYMATTR InstName U10
SYMBOL SN74LVC1G08 2784 2048 R0
SYMATTR InstName U11
SYMBOL SN74LVC1G08 2784 2240 R0
SYMATTR InstName U12
SYMBOL cap 3360 1360 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C3
SYMATTR Value {Cf}
SYMBOL current 3424 1376 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value 10m
TEXT -1312 1032 Left 2 !.tran 0 2m 0
TEXT -1312 1112 Left 2 !.param R_led = 100
TEXT -1312 1152 Left 2 !.param R_opto = 1k
TEXT -1312 1072 Left 2 !.param R_load = 2
TEXT -1312 1192 Left 2 !.param R_GK = 330
TEXT -1312 1232 Left 2 !.param R_GK_PT = 10k
TEXT -1312 1272 Left 2 !.param R_gate = 1k
TEXT -40 984 Left 2 !.param Lleak = 1.95u
TEXT -40 1016 Left 2 !.param k = sqrt((Lm - Lleak) / Lm)
TEXT -40 1048 Left 2 !.param fsw = 100k
TEXT -40 1080 Left 2 !.param d = 0.5
TEXT -40 952 Left 2 !.param Lm = 563u
TEXT 1184 912 Left 2 !.param Cf = 10u
