Version 4
SHEET 1 11460 3748
WIRE 864 -624 -624 -624
WIRE 1424 -624 864 -624
WIRE 1744 -624 1520 -624
WIRE 1744 -512 1744 -624
WIRE 864 -464 864 -624
WIRE 960 -464 864 -464
WIRE 1152 -464 1040 -464
WIRE 1296 -464 1152 -464
WIRE 1472 -464 1472 -560
WIRE 1472 -464 1296 -464
WIRE 1152 -432 1152 -464
WIRE 1472 -400 1472 -464
WIRE 1296 -368 1296 -464
WIRE 1744 -368 1744 -432
WIRE 1152 -320 1152 -352
WIRE 1232 -320 1152 -320
WIRE 1472 -304 1472 -336
WIRE 1152 -256 1152 -320
WIRE 1472 -256 1472 -304
WIRE 1152 -144 1152 -176
WIRE 1296 -144 1296 -272
WIRE 1152 -64 1152 -96
WIRE 1296 16 1296 -96
WIRE 1152 64 1152 16
WIRE 1232 64 1152 64
WIRE 1152 112 1152 64
WIRE 1744 144 1744 16
WIRE 2096 176 2032 176
WIRE 2272 176 2176 176
WIRE 2432 176 2272 176
WIRE 2560 176 2432 176
WIRE 2432 192 2432 176
WIRE 2864 192 2720 192
WIRE 3120 192 2944 192
WIRE 960 224 864 224
WIRE 1152 224 1152 192
WIRE 1152 224 1040 224
WIRE 1296 224 1296 112
WIRE 1296 224 1152 224
WIRE 1472 224 1472 -192
WIRE 1472 224 1296 224
WIRE 2272 256 2272 176
WIRE 2560 256 2560 176
WIRE 1472 288 1472 224
WIRE 2432 304 2432 272
WIRE 2432 304 2336 304
WIRE 2432 336 2432 304
WIRE -624 352 -624 -624
WIRE -416 352 -624 352
WIRE 752 352 544 352
WIRE 864 352 864 224
WIRE 864 352 752 352
WIRE 1424 352 864 352
WIRE 1744 352 1744 224
WIRE 1744 352 1520 352
WIRE 3120 352 3120 192
WIRE -416 384 -416 352
WIRE 544 384 544 352
WIRE 2272 384 2272 352
WIRE 2272 384 2224 384
WIRE 2368 384 2272 384
WIRE -272 400 -368 400
WIRE 496 400 416 400
WIRE 2032 464 2032 176
WIRE 2224 480 2224 384
WIRE 2720 480 2720 192
WIRE 2432 512 2432 432
WIRE 2432 512 2288 512
WIRE 2560 512 2560 336
WIRE 2560 512 2432 512
WIRE 3120 528 3120 432
WIRE 3120 528 2976 528
WIRE -416 592 -416 480
WIRE 48 592 -416 592
WIRE 544 592 544 480
WIRE 544 592 112 592
WIRE 2224 592 2224 560
WIRE -624 608 -624 352
WIRE 752 608 752 352
WIRE 2288 608 2288 512
WIRE 2976 624 2976 528
WIRE -416 672 -416 592
WIRE 544 672 544 592
WIRE 2032 672 2032 544
WIRE 2432 672 2432 512
WIRE 2720 688 2720 560
WIRE 3120 688 3120 528
WIRE 2288 720 2288 688
WIRE 2368 720 2288 720
WIRE 2976 736 2976 704
WIRE 3056 736 2976 736
WIRE -272 752 -272 400
WIRE -272 752 -368 752
WIRE 48 752 -272 752
WIRE 416 752 416 400
WIRE 416 752 112 752
WIRE 496 752 416 752
WIRE 2288 784 2288 720
WIRE -272 800 -272 752
WIRE 416 800 416 752
WIRE 2976 800 2976 736
WIRE 2288 896 2288 864
WIRE 2432 896 2432 768
WIRE 2976 912 2976 880
WIRE 3120 912 3120 784
WIRE -624 960 -624 688
WIRE -416 960 -416 768
WIRE -416 960 -624 960
WIRE -272 960 -272 880
WIRE -272 960 -416 960
WIRE 416 960 416 864
WIRE 416 960 -272 960
WIRE 544 960 544 768
WIRE 544 960 416 960
WIRE 752 960 752 672
WIRE 752 960 544 960
FLAG 1472 -304 0
FLAG 1744 -368 0
FLAG 1744 16 0
FLAG 1296 -144 0
FLAG 1152 -144 0
FLAG 1152 -96 0
FLAG 1296 -96 0
FLAG 3120 912 0
FLAG 2976 912 0
FLAG 2720 688 0
FLAG 2432 896 0
FLAG 2288 896 0
FLAG 2032 672 0
FLAG 2224 592 0
SYMBOL voltage -272 784 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -469 194 Left 2
SYMATTR Value PULSE(0 4.2 {1 / fsw / 2} 10n 10n {d / fsw} {1 / fsw})
SYMATTR InstName V6
SYMBOL cap 112 576 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value {Cf}
SYMBOL cap 768 672 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C7
SYMATTR Value {Cf}
SYMBOL cap 48 736 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 100n
SYMBOL schottky 432 800 M0
SYMATTR InstName D8
SYMATTR Value RB480K
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage -624 592 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value {Vbat}
SYMBOL npn 1424 -560 R270
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL res 1728 -528 R0
SYMATTR InstName R1
SYMATTR Value 30
SYMBOL res 1056 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 2k
SYMBOL pnp 1424 288 M90
SYMATTR InstName Q2
SYMATTR Value 2N3906
SYMBOL res 1760 240 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 30
SYMBOL cap 1456 -400 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL cap 1456 -256 R0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL res 944 -448 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 2k
SYMBOL AO3401A 576 704 R0
SYMATTR InstName U1
SYMBOL AO3401A -448 448 R180
SYMATTR InstName U2
SYMBOL nmoss -368 672 M0
SYMATTR InstName U3
SYMATTR Value AO3400
SYMATTR SpiceModel AO3400
SYMBOL nmoss 496 480 M180
SYMATTR InstName U4
SYMATTR Value AO3400
SYMATTR SpiceModel AO3400
SYMBOL npn 1232 -368 R0
SYMATTR InstName Q3
SYMATTR Value 2N3904
SYMBOL res 1168 -336 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 51k
SYMBOL res 1168 -160 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL pnp 1232 112 M180
SYMATTR InstName Q4
SYMATTR Value 2N3906
SYMBOL res 1136 96 R0
SYMATTR InstName R7
SYMATTR Value 51k
SYMBOL res 1136 -80 R0
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL npn 3056 688 R0
SYMATTR InstName Q5
SYMATTR Value 2N3904
SYMBOL res 2992 720 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 510k
SYMBOL res 2992 896 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 100k
SYMBOL voltage 2720 464 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value {Vbat}
SYMBOL res 2960 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL current 3120 352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value 100µ
SYMBOL npn 2368 672 R0
SYMATTR InstName Q6
SYMATTR Value 2N3904
SYMBOL res 2304 704 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R12
SYMATTR Value 510k
SYMBOL res 2304 880 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R13
SYMATTR Value 100k
SYMBOL voltage 2032 448 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value {Vbat}
SYMBOL res 2192 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL pnp 2368 432 M180
SYMATTR InstName Q7
SYMATTR Value 2N3906
SYMBOL pnp 2336 352 R180
SYMATTR InstName Q8
SYMATTR Value 2N3906
SYMBOL res 2448 288 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value 1k
SYMBOL res 2240 576 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R16
SYMATTR Value 100k
SYMBOL res 2576 352 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R17
SYMATTR Value 100k
TEXT -1000 880 Left 2 !.param fsw = 40k
TEXT -1000 912 Left 2 !.param d = 0.5
TEXT -1000 848 Left 2 !.param Cf = 10u
TEXT -1000 944 Left 2 !.tran 10m
TEXT -1536 112 Left 2 !.lib AO3400.mod
TEXT -1184 528 Left 2 !.step param Vbat list 3 3.3 3.6 3.9 4.2
