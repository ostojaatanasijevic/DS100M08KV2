* C:\users\ostoja\Desktop\Elektronika\diff_sonde\DS100M08KV2\simulacije\charge_pump\complete_charge_pump_electrolytic.asc
C1 N006 N003 10µ
C2 N009 vout 10µ
C3 G2 N008 100n
D1 N008 0 1N4148
V2 vin 0 {Vbat}
R2 vin vout 30
C9 G1 N002 100n
D2 N002 0 1N4148
M1 N003 G2 vin vin AO6407
M2 N003 G1 0 0 AO4630_N
M3 N005 N008 0 0 AO6407
M4 N005 N002 vout vout AO4630_N
B1 output_power 0 V= if(time > start_time, idt(V(vin, vout)*I(R2))/(time - start_time),0)
B2 input_power 0 V=if(time > start_time, -idt(V(vin)*I(V2)) / (time - start_time),0)
B3 losses 0 V= V(input_power) - V(output_power)
B4 efficiency 0 V= min(max(V(output_power) / V(input_power),0), 1)
R1 N010 out 1k
C4 N010 0 100p
D3 N010 out 1N4148
R3 N014 out 10k
D4 out N014 1N4148
C6 N014 0 100p
XU1 G1 N014 vin 0 SN74HC14
XU2 G2 N010 vin 0 SN74HC14
XU3 G1 N014 vin 0 SN74HC14
XU4 G2 N010 vin 0 SN74HC14
XU5 G2 N010 vin 0 SN74HC14
C5 N001 vin 10µ
XU6 out N013 vin 0 SN74HC14
R4 out N013 33k
C7 N013 0 1n
D5 N012 N011 1N4148
R5 out N012 1Meg
D6 N015 out 1N4148
R6 N013 N015 100k
C8 N004 N003 47µ
R7 N005 N004 4
R8 N005 N006 100m
R9 0 N009 100m
R10 vout N001 100m
C10 N007 vout 47µ
R11 0 N007 {esr}
.model D D
.lib C:\users\ostoja\Documents\LTspiceXVII\lib\cmp\standard.dio
.model NMOS NMOS
.model PMOS PMOS
.lib C:\users\ostoja\Documents\LTspiceXVII\lib\cmp\standard.mos
.param fsw 50k
.param d = 0.5
.param Cf = 100u
.tran 2m uic
.lib AO3400.mod
.param Vbat 4.2
.param start_time = 2m
* 300 kHz peak eff: 98%
.step param esr list 4 1Meg
.lib SN74HC14.cir
.backanno
.end
