Version 4
SHEET 1 11460 3748
WIRE -1680 752 -1712 752
WIRE -1648 752 -1680 752
WIRE -1536 752 -1600 752
WIRE -1712 800 -1712 752
WIRE -1600 800 -1600 752
WIRE -1712 944 -1712 880
WIRE -1600 944 -1600 880
WIRE -1680 1024 -1712 1024
WIRE -1648 1024 -1680 1024
WIRE 2688 1040 2672 1040
WIRE 2848 1040 2848 1024
WIRE 2848 1040 2688 1040
WIRE -1712 1072 -1712 1024
WIRE 896 1088 880 1088
WIRE 1056 1088 896 1088
WIRE 1392 1088 1120 1088
WIRE 2848 1120 2848 1040
WIRE -16 1136 -16 1104
WIRE 2800 1136 2736 1136
WIRE -16 1200 -16 1136
WIRE -1712 1216 -1712 1152
WIRE 960 1248 880 1248
WIRE 1024 1248 960 1248
WIRE 1216 1248 1136 1248
WIRE 1280 1248 1216 1248
WIRE 1392 1248 1392 1088
WIRE 1392 1248 1344 1248
WIRE 1488 1248 1392 1248
WIRE 1632 1248 1552 1248
WIRE 1712 1248 1632 1248
WIRE 2736 1248 2736 1136
WIRE 2736 1248 2592 1248
WIRE 2848 1248 2848 1216
WIRE 2992 1248 2848 1248
WIRE 3152 1248 3056 1248
WIRE 3248 1248 3152 1248
WIRE 3392 1248 3312 1248
WIRE 3472 1248 3392 1248
WIRE 2848 1280 2848 1248
WIRE 1632 1296 1632 1248
WIRE 1712 1296 1712 1248
WIRE 3152 1296 3152 1248
WIRE 3392 1296 3392 1248
WIRE 3472 1296 3472 1248
WIRE -16 1328 -16 1280
WIRE 880 1344 880 1248
WIRE 2592 1344 2592 1248
WIRE 2736 1360 2736 1248
WIRE 2800 1360 2736 1360
WIRE 1632 1408 1632 1360
WIRE 1712 1408 1712 1376
WIRE 3152 1408 3152 1360
WIRE 3392 1408 3392 1360
WIRE 3472 1408 3472 1376
WIRE 2848 1424 2848 1376
WIRE 960 1440 960 1248
WIRE 1024 1440 960 1440
WIRE 1216 1440 1216 1248
WIRE 1216 1440 1136 1440
WIRE 880 1472 880 1424
WIRE 2592 1472 2592 1424
WIRE 960 1648 960 1440
WIRE 1024 1648 960 1648
WIRE 1216 1648 1216 1440
WIRE 1216 1648 1136 1648
WIRE 2880 1728 2704 1728
WIRE 4048 1728 3840 1728
WIRE 4208 1728 4048 1728
WIRE 2880 1760 2880 1728
WIRE 3840 1760 3840 1728
WIRE 3296 1776 2928 1776
WIRE 3792 1776 3456 1776
WIRE 960 1840 960 1648
WIRE 1024 1840 960 1840
WIRE 1216 1840 1216 1648
WIRE 1216 1840 1136 1840
WIRE 4048 1888 4048 1728
WIRE 4208 1888 4208 1728
WIRE 2880 1968 2880 1856
WIRE 3344 1968 2880 1968
WIRE 3840 1968 3840 1856
WIRE 3840 1968 3408 1968
WIRE 2704 1984 2704 1728
WIRE 960 2048 960 1840
WIRE 1024 2048 960 2048
WIRE 1216 2048 1216 1840
WIRE 1216 2048 1136 2048
WIRE 2880 2048 2880 1968
WIRE 3840 2048 3840 1968
WIRE 4048 2096 4048 1952
WIRE 4208 2096 4208 1968
WIRE 2704 2112 2704 2064
WIRE 3296 2128 3296 1776
WIRE 3296 2128 2928 2128
WIRE 3344 2128 3296 2128
WIRE 3456 2128 3456 1776
WIRE 3456 2128 3408 2128
WIRE 3792 2128 3456 2128
WIRE 4864 2128 4864 2080
WIRE 3296 2176 3296 2128
WIRE 3456 2176 3456 2128
WIRE 960 2240 960 2048
WIRE 1024 2240 960 2240
WIRE 1216 2240 1216 2048
WIRE 1216 2240 1136 2240
WIRE 2880 2304 2880 2144
WIRE 3296 2304 3296 2256
WIRE 3456 2304 3456 2240
WIRE 3840 2304 3840 2144
FLAG -1600 944 0
FLAG -1680 752 input
FLAG -1536 752 source
FLAG -1712 944 0
FLAG -1680 1024 init
FLAG -1712 1216 0
FLAG 880 1472 0
FLAG 1024 1312 0
FLAG 1024 1216 5V
FLAG 1024 1280 5V
FLAG 1632 1408 0
FLAG -16 1328 0
FLAG -16 1136 5V
FLAG 1712 1408 0
FLAG 1024 1504 0
FLAG 1024 1408 5V
FLAG 1024 1472 5V
FLAG 896 1088 5V
FLAG 1024 1712 0
FLAG 1024 1616 5V
FLAG 1024 1680 5V
FLAG 1024 1904 0
FLAG 1024 1808 5V
FLAG 1024 1872 5V
FLAG 1024 2112 0
FLAG 1024 2016 5V
FLAG 1024 2080 5V
FLAG 1024 2304 0
FLAG 1024 2208 5V
FLAG 1024 2272 5V
FLAG 2592 1472 0
FLAG 3392 1408 0
FLAG 3472 1408 0
FLAG 3152 1408 0
FLAG 2848 1424 0
FLAG 2688 1040 5V
FLAG 3296 2304 0
FLAG 4048 2096 0
FLAG 4208 2096 0
FLAG 2880 2304 0
FLAG 4864 2128 0
FLAG 3840 2304 0
FLAG 3456 2304 0
FLAG 2704 2112 0
SYMBOL voltage -1600 784 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 72 52 Right 2
WINDOW 3 69 103 Right 2
SYMATTR InstName V7
SYMATTR Value 310
SYMBOL voltage -1712 784 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value PULSE(0 5 10u 10n 10n 1m 10m)
SYMBOL voltage -1712 1056 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 12 10u 10n 10n 30u 10m 1)
SYMBOL voltage 880 1328 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 5 {1 / fsw / 2} 10n 10n {d / fsw} {1 / fsw})
SYMBOL schottky 1056 1104 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value RB160MM-60
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 1488 1264 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value RB160MM-60
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 1344 1232 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value {Cf}
SYMBOL voltage -16 1184 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL SN74LVC1G08 1072 1248 R0
SYMATTR InstName U1
SYMBOL res 1696 1280 R0
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL SN74LVC1G08 1072 1440 R0
SYMATTR InstName U2
SYMBOL SN74LVC1G08 1072 1648 R0
SYMATTR InstName U3
SYMBOL SN74LVC1G08 1072 1840 R0
SYMATTR InstName U4
SYMBOL SN74LVC1G08 1072 2048 R0
SYMATTR InstName U5
SYMBOL SN74LVC1G08 1072 2240 R0
SYMATTR InstName U6
SYMBOL cap 1648 1360 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C1
SYMATTR Value {Cf}
SYMBOL voltage 2592 1328 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 5 {1 / fsw / 2} 10n 10n {d / fsw} {1 / fsw})
SYMBOL schottky 3136 1296 R0
SYMATTR InstName D1
SYMATTR Value RB160MM-60
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 3312 1232 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value RB160MM-60
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 3056 1232 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value {Cf}
SYMBOL cap 3408 1360 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C3
SYMATTR Value {Cf}
SYMBOL current 3472 1376 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value 10m
SYMBOL nmos 2800 1280 R0
SYMATTR InstName M1
SYMATTR Value AO4630_N
SYMBOL pmos 2800 1216 M180
SYMATTR InstName M2
SYMATTR Value AO6407
SYMBOL voltage 3296 2160 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 3.6 {1 / fsw / 2} 10n 10n {d / fsw} {1 / fsw})
SYMBOL cap 3408 1952 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value {Cf}
SYMBOL cap 4064 1952 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C7
SYMATTR Value {Cf}
SYMBOL current 4208 1968 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I2
SYMATTR Value 10m
SYMBOL nmos 2928 2048 M0
SYMATTR InstName M4
SYMATTR Value AO4630_N
SYMBOL pmos 2928 1856 R180
SYMATTR InstName M6
SYMATTR Value AO6407
SYMBOL voltage 4864 1984 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value PULSE(0 5 0 10n 10n {d / fsw} {1 / fsw})
SYMBOL pmos 3792 2048 R0
SYMATTR InstName M7
SYMATTR Value AO6407
SYMBOL cap 3344 2112 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 100n
SYMBOL schottky 3472 2176 M0
SYMATTR InstName D8
SYMATTR Value RB480K
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL nmos 3792 1856 M180
SYMATTR InstName M8
SYMATTR Value AO4630_N
SYMBOL voltage 2704 1968 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 3.6
TEXT -1312 1032 Left 2 !.tran 0 5m 0
TEXT -1312 1112 Left 2 !.param R_led = 100
TEXT -1312 1152 Left 2 !.param R_opto = 1k
TEXT -1312 1072 Left 2 !.param R_load = 2
TEXT -1312 1192 Left 2 !.param R_GK = 330
TEXT -1312 1232 Left 2 !.param R_GK_PT = 10k
TEXT -1312 1272 Left 2 !.param R_gate = 1k
TEXT 2296 2192 Left 2 !.param Lleak = 1.95u
TEXT 2296 2224 Left 2 !.param k = sqrt((Lm - Lleak) / Lm)
TEXT 2296 2256 Left 2 !.param fsw = 10k
TEXT 2296 2288 Left 2 !.param d = 0.5
TEXT 2296 2160 Left 2 !.param Lm = 563u
TEXT 3984 2168 Left 2 !.param Cf = 10u
